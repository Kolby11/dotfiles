source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/scheme/current.conf
source = ~/.config/hypr/matugen/matugen-hyprland.conf

# Programs
$terminal = kitty
$launcher = caelestia:launcher
$fileManager = thunar
$volumecontrol = pavucontrol
$browser = firefox
$music = spotify

# Execs
exec-once = hyprpaper
exec-once = hyprctl hyprpaper preload $image && hyprctl hyprpaper wallpaper " ,$image"1
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = hyprpaper & caelestia shell -d

# Keybinds
$mainMod = SUPER

bind = $mainMod, GRAVE, exec, $terminal # Open Terminal
bind = $mainMod, T, exec, $fileManager
bind = $mainMod, B, exec, $browser
bind = $mainMod SHIFT, V, exec, $volumecontrol
bind = $mainMod CTRL, S, exec, $music
bind = $mainMod SHIFT, Q, exec, $deskScripts/wlogout.sh
bind = $mainMod, D, exec, $rofiScripts/launcher


bind = CTRL ALT, Delete, exec, hyprctl dispatch exit 0

# floating layout
bind = $mainMod SHIFT, F, togglefloating,
bind = $mainMod ALT, F, exec, hyprctl dispatch workspaceopt allfloat

# group
bind = $mainMod, G, togglegroup # toggle group
bind = $mainMod CTRL, Tab, changegroupactive  # change focus to another window

# Cycle windows if floating bring to top
bind = ALT, Tab, cyclenext
bind = ALT CTRL, Tab, bringactivetotop  

# bind = $mainMod, mouse_down, exec, hyprctl keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 + 0.5}')
# bind = $mainMod, mouse_up, exec, hyprctl keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 - 0.5}')
# bind = $mainMod SHIFT, mouse_up, exec, hyprctl keyword cursor:zoom_factor 1

bind = $mainMod, SPACE, global, workspace, special
bind = $mainMod, D, global, $launcher
bindin = $mainMod, mouse:272, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse:273, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse:274, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse:275, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse:276, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse:277, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse_up, global, caelestia:launcherInterrupt
bindin = $mainMod, mouse_down, global, caelestia:launcherInterrupt

# Brightness
bindl = , XF86MonBrightnessUp, global, caelestia:brightnessUp
bindl = , XF86MonBrightnessDown, global, caelestia:brightnessDown

# Media
bindl = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindl = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = Ctrl+$mainMod, Space, global, caelestia:mediaToggle
bindl = , XF86AudioPlay, global, caelestia:mediaToggle
bindl = , XF86AudioPause, global, caelestia:mediaToggle
bindl = Ctrl+$mainMod, Equal, global, caelestia:mediaNext
bindl = , XF86AudioNext, global, caelestia:mediaNext
bindl = Ctrl+$mainMod, Minus, global, caelestia:mediaPrev
bindl = , XF86AudioPrev, global, caelestia:mediaPrev
bindl = , XF86AudioStop, global, caelestia:mediaStop

bind = $mainMod SHIFT, R, exec, hyprctl reload
bind = $mainMod, Q, killactive, # Close active window
bind = $mainMod, M, exec, wlogout --protocol layer-shell
bind = $mainMod, E, exec, pcmanfm-qt # File Manager
bind = $mainMod, V, togglefloating, # Toggle Floating
bind = $mainMod, D, exec, wofi --show drun # Show Application Launcher
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, S, togglesplit, # dwindle
bind = $mainMod SHIFT, Q, exec, swaylock # Lock Screen
bind = $mainMod SHIFT, S, exec, hyprshot -m region --clipboard-only # Take a screenshot

bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

bind = $mainMod CTRL, l, resizeactive, 20 0
bind = $mainMod CTRL, h, resizeactive, -20 0
bind = $mainMod CTRL, k, resizeactive, 0 -20
bind = $mainMod CTRL, j, resizeactive, 0 20

bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d

bind = $mainMod, W, exec, firefox

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Input
input {
    kb_layout = us

    kb_variant =
    kb_model =
    kb_options = grp:alt_shift_toggle 
    kb_rules =

    follow_mouse = 1

    touchpad {
        natural_scroll = no
        natural_scroll = true
    }

    sensitivity = 0
}


# Settings
dwindle {
    preserve_split = true
    smart_split = false
    smart_resizing = false
    # precise_mouse_move = true
}

master {
  new_status = master
  new_on_top = 1
  mfact = 0.5
}

gestures {
  workspace_swipe = true
  workspace_swipe_fingers = 3
  workspace_swipe_distance = 300
  workspace_swipe_invert = true
  workspace_swipe_min_speed_to_force = 103030
  workspace_swipe_cancel_ratio = 0.5
  workspace_swipe_create_new = true 
  workspace_swipe_forever = true
}

misc {
  disable_hyprland_logo = true
  disable_splash_rendering = true
  vfr = true
  vrr = 2
  mouse_move_enables_dpms = true
  enable_swallow = true
  swallow_regex = ^(kitty)$
  focus_on_activate = false
  initial_workspace_tracking = 0
  middle_click_paste = false
}

xwayland {
  enabled = true
  force_zero_scaling = true
}

render {
  explicit_sync = 2
  explicit_sync_kms = 2
  direct_scanout = false
}

# Decorations
general {
    gaps_in = 4
    gaps_out = 5
    gaps_workspaces = 50
    
    border_size = 1
    col.active_border = $primary
    col.inactive_border = $surface
    resize_on_border = true

    no_focus_fallback = true
    
    allow_tearing = true
    
    snap {
    	enabled = true
    }

    layout = dwindle
}

decoration {
    rounding = 18
    
    blur {
        enabled = true
        xray = false
        special = false
        new_optimizations = true
        size = 14
        passes = 3
        brightness = 1
        noise = 0.01
        contrast = 1
        popups = true
        popups_ignorealpha = 0.6
        input_methods = true
        input_methods_ignorealpha = 0.8
    }
    
    shadow {
        enabled = true
        ignore_window = true
        range = 30
        offset = 0 2
        render_power = 4
        color = $shadow
    }
    
    dim_inactive = true
    dim_strength = 0.025
    dim_special = 0.07
}

group {
  col.border_active = $tertiary

   groupbar {
	col.active = $surface
   }
}

animations {
    enabled = yes
    bezier = overshot, 0.05, 0.9, 0.1, 1.05
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    animation = windows, 1, 5, overshot, slide
    animation = windowsOut, 1, 4, smoothOut, slide
    animation = windowsMove, 1, 4, default
    animation = border, 1, 10, default
    animation = fade, 1, 10, smoothIn
    animation = fadeDim, 1, 10, smoothIn
    animation = workspaces, 1, 6, default
}

dwindle {
    pseudotile = yes
    preserve_split = yes
}


# Windowrules
# windowrule = float, file_progress
# windowrule = float, confirm
# windowrule = float, dialog
# windowrule = float, download
# windowrule = float, notification
# windowrule = float, error
# windowrule = float, splash
# windowrule = float, confirmreset
# windowrule = float, title:Open File
# windowrule = float, title:branchdialog
# windowrule = float,viewnior
# windowrule = float, pavucontrol-qt
# windowrule = float, pavucontrol
# windowrule = float, file-roller
# windowrule = fullscreen, wlogout
# windowrule = float, title:wlogout
# windowrule = fullscreen, title:wlogout
# windowrule = idleinhibit stayfocused, mpv
# windowrulev2 = float, title:^(Media viewer)$

# # Picture in picture windows
# windowrulev2 = float, title:^(Picture-in-Picture)$
# windowrulev2 = pin, title:^(Picture-in-Picture)$
# windowrulev2 = float, class:^(vesktop)$,title:^(Discord Popout)$ 
# windowrulev2 = pin, class:^(vesktop)$,title:^(Discord Popout)$ 
# windowrulev2 = float, class:^(steam)$,title:^(Friends List)$


# # Workspace assign
# Replace 'code-url-handler' with your actual class from hyprctl clients
windowrulev2 = opacity 0.9 0.9, class:^(Code)$

# windowrulev2 = workspace: 1, class:^(kitty)$
# windowrulev2 = workspace: 2, class:^(firefox)$
# windowrulev2 = workspace: 5, class:^(steam)$
# windowrulev2 = workspace: 10, class:^(org.telegram.desktop)$
# windowrulev2 = workspace: 10, class:^(vesktop)$

# Workspaces